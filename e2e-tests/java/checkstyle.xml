<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
    "-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
    "https://checkstyle.org/dtds/configuration_1_3.dtd">

<!--
    Checkstyle configuration for PetSpot E2E Tests (Java 21)
    
    Based on Google Java Style Guide with adjustments for test code.
    Focuses on code consistency and maintainability.
-->

<module name="Checker">
    <property name="charset" value="UTF-8"/>
    <property name="severity" value="warning"/>
    <property name="fileExtensions" value="java"/>

    <!-- File-level checks -->
    <module name="FileLength">
        <property name="max" value="2000"/>
        <property name="fileExtensions" value="java"/>
    </module>

    <module name="FileTabCharacter">
        <property name="eachLine" value="true"/>
    </module>

    <!-- TEMPORARILY DISABLED - TODO: Re-enable and fix long lines (~30+ violations) -->
    <!-- See: e2e-tests/java/TODO-CHECKSTYLE.md -->
    <!--
    <module name="LineLength">
        <property name="max" value="120"/>
        <property name="ignorePattern" value="^package.*|^import.*|a href|href|http://|https://|ftp://"/>
    </module>
    -->

    <!-- TreeWalker: Traverses the AST -->
    <module name="TreeWalker">
        <!-- Naming conventions -->
        <!-- TEMPORARILY DISABLED - TODO: Re-enable and fix constant names (~20+ violations) -->
        <!-- See: e2e-tests/java/TODO-CHECKSTYLE.md -->
        <!-- <module name="ConstantName"/> -->
        <module name="LocalFinalVariableName"/>
        <module name="LocalVariableName"/>
        <module name="MemberName"/>
        <module name="MethodName"/>
        <module name="PackageName"/>
        <module name="ParameterName"/>
        <module name="StaticVariableName"/>
        <module name="TypeName"/>

        <!-- Code style -->
        <module name="LeftCurly"/>
        <module name="RightCurly"/>
        <!-- TEMPORARILY DISABLED - TODO: Re-enable and fix whitespace issues (~15+ violations) -->
        <!-- See: e2e-tests/java/TODO-CHECKSTYLE.md -->
        <!--
        <module name="WhitespaceAround">
            <property name="allowEmptyConstructors" value="true"/>
            <property name="allowEmptyMethods" value="true"/>
            <property name="allowEmptyTypes" value="true"/>
            <property name="allowEmptyLoops" value="true"/>
        </module>
        -->
        <module name="WhitespaceAfter"/>
        <module name="NoWhitespaceBefore"/>
        <module name="NoWhitespaceAfter"/>
        <!-- TEMPORARILY DISABLED - TODO: Re-enable and fix operator wrapping (~40+ violations) -->
        <!-- See: e2e-tests/java/TODO-CHECKSTYLE.md -->
        <!-- <module name="OperatorWrap"/> -->
        <module name="ParenPad"/>
        <module name="TypecastParenPad"/>

        <!-- Imports -->
        <module name="AvoidStarImport"/>
        <module name="IllegalImport"/>
        <module name="RedundantImport"/>
        <module name="UnusedImports">
            <property name="processJavadoc" value="false"/>
        </module>
        <!-- TEMPORARILY DISABLED - TODO: Re-enable and fix import order (~100+ violations) -->
        <!-- See: e2e-tests/java/TODO-CHECKSTYLE.md -->
        <!--
        <module name="ImportOrder">
            <property name="groups" value="/^java\./,javax,org,com"/>
            <property name="ordered" value="true"/>
            <property name="separated" value="true"/>
            <property name="option" value="bottom"/>
            <property name="sortStaticImportsAlphabetically" value="true"/>
        </module>
        -->

        <!-- Size violations -->
        <module name="MethodLength">
            <property name="max" value="150"/>
            <property name="countEmpty" value="false"/>
        </module>
        <module name="ParameterNumber">
            <property name="max" value="7"/>
        </module>

        <!-- Whitespace -->
        <module name="EmptyForIteratorPad"/>
        <module name="GenericWhitespace"/>

        <!-- Modifiers -->
        <module name="ModifierOrder"/>
        <module name="RedundantModifier"/>

        <!-- Blocks -->
        <module name="AvoidNestedBlocks"/>
        <module name="EmptyBlock">
            <property name="option" value="TEXT"/>
            <property name="tokens" value="LITERAL_TRY, LITERAL_FINALLY, LITERAL_IF, LITERAL_ELSE, LITERAL_SWITCH"/>
        </module>
        <module name="NeedBraces"/>

        <!-- Coding -->
        <module name="EmptyStatement"/>
        <module name="EqualsHashCode"/>
        <module name="IllegalInstantiation"/>
        <module name="InnerAssignment"/>
        <module name="MissingSwitchDefault"/>
        <module name="SimplifyBooleanExpression"/>
        <module name="SimplifyBooleanReturn"/>

        <!-- Class design -->
        <module name="FinalClass"/>
        <!-- TEMPORARILY DISABLED - TODO: Re-enable and add private constructors (~10+ violations) -->
        <!-- See: e2e-tests/java/TODO-CHECKSTYLE.md -->
        <!-- <module name="HideUtilityClassConstructor"/> -->
        <module name="InterfaceIsType"/>
        <module name="VisibilityModifier">
            <property name="protectedAllowed" value="true"/>
            <property name="allowPublicFinalFields" value="true"/>
            <property name="allowPublicImmutableFields" value="true"/>
        </module>

        <!-- Miscellaneous -->
        <module name="ArrayTypeStyle"/>
        <module name="UpperEll"/>
        <module name="OuterTypeFilename"/>
        <module name="OneStatementPerLine"/>
        <module name="MultipleVariableDeclarations"/>
        <module name="OneTopLevelClass"/>

        <!-- Javadoc (relaxed for test code - disabled to avoid false positives) -->
        <!-- Javadoc checks are disabled for test code to allow flexibility -->
    </module>
</module>

